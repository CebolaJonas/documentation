"use strict";(()=>{var jr=Object.create;var ee=Object.defineProperty;var Br=Object.getOwnPropertyDescriptor;var Dr=Object.getOwnPropertyNames;var Mr=Object.getPrototypeOf,kr=Object.prototype.hasOwnProperty;var G=(r,s)=>()=>(r&&(s=r(r=0)),s);var B=(r,s)=>()=>(s||r((s={exports:{}}).exports,s),s.exports),de=(r,s)=>{for(var e in s)ee(r,e,{get:s[e],enumerable:!0})},qe=(r,s,e,l)=>{if(s&&typeof s=="object"||typeof s=="function")for(let c of Dr(s))!kr.call(r,c)&&c!==e&&ee(r,c,{get:()=>s[c],enumerable:!(l=Br(s,c))||l.enumerable});return r};var Gr=(r,s,e)=>(e=r!=null?jr(Mr(r)):{},qe(s||!r||!r.__esModule?ee(e,"default",{value:r,enumerable:!0}):e,r)),ge=r=>qe(ee({},"__esModule",{value:!0}),r);var Je=B(te=>{"use strict";Object.defineProperty(te,"__esModule",{value:!0});te.getChooserHtml=void 0;var Hr=r=>{let s="<div>";return Object.keys(r).forEach(e=>{let l=r[e],c=l.currentValue||l.defaultValue;s+='<div class="markdoc-pref__container">',s+=`<div class="markdoc-pref__label">${l.displayName}</div>`,l.options.forEach(p=>{let $=p.id===c?"selected":"";s+=`<div class="markdoc-pref__pill ${$}" data-pref-id="${l.id}" data-option-id="${p.id}">${p.displayName}</div>`}),s+="</div>"}),s+="<hr />",s+="</div>",s};te.getChooserHtml=Hr});var ze=B(T=>{"use strict";Object.defineProperty(T,"__esModule",{value:!0});T.PREF_OPTIONS_ID_REGEX=T.GLOBAL_PLACEHOLDER_REGEX=T.PLACEHOLDER_REGEX=T.SNAKE_CASE_REGEX=void 0;T.SNAKE_CASE_REGEX=/^[a-z0-9]+(_[a-z0-9]+)*$/;T.PLACEHOLDER_REGEX=/<([A-Z0-9_]+)>/;T.GLOBAL_PLACEHOLDER_REGEX=/<([A-Z0-9_]+)>/g;T.PREF_OPTIONS_ID_REGEX=/^([a-z0-9]+|<([A-Z0-9_]+)>)(_([a-z0-9]+)|_<([A-Z0-9_]+)>)*_options$/});var Ye=B(H=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0});H.resolvePagePrefs=Xr;H.resolveMinifiedPagePrefs=Ur;H.resolveMinifiedPrefOptionsSource=Ze;H.resolvePrefOptionsSource=We;var re=ze();function Xr(r){let s={},e=Object.assign({},r.valsByPrefId);return r.pagePrefsConfig.forEach(l=>{let c=We({pagePrefConfig:l,valsByPrefId:e}),p=c.default_value||r.prefOptionsConfig[c.options_source].find(b=>b.default).id,$=r.prefOptionsConfig[c.options_source].map(b=>b.id),P=r.valsByPrefId[c.id];P&&!$.includes(P)&&(P=p,e[c.id]=p);let F={id:c.id,displayName:c.display_name,defaultValue:p,currentValue:P,options:r.prefOptionsConfig[c.options_source].map(b=>({id:b.id,displayName:b.display_name}))};s[c.id]=F}),s}function Ur(r){let s={},e=Object.assign({},r.valsByPrefId);return r.pagePrefsConfig.forEach(l=>{let c=Ze({pagePrefConfig:l,valsByPrefId:e}),p=c.d||r.prefOptionsConfig[c.o].find(b=>b.d).i,$=r.prefOptionsConfig[c.o].map(b=>b.i),P=r.valsByPrefId[c.i];P&&!$.includes(P)&&(P=p,e[c.i]=p);let F={id:c.i,displayName:c.n,defaultValue:p,currentValue:P,options:r.prefOptionsConfig[c.o].map(b=>({id:b.i,displayName:b.n}))};s[c.i]=F}),s}function Ze(r){let s=Object.assign({},r.pagePrefConfig);return re.GLOBAL_PLACEHOLDER_REGEX.test(s.o)&&(s.o=s.o.replace(re.GLOBAL_PLACEHOLDER_REGEX,(e,l)=>r.valsByPrefId[l.toLowerCase()])),s}function We(r){let s=Object.assign({},r.pagePrefConfig);return re.GLOBAL_PLACEHOLDER_REGEX.test(s.options_source)&&(s.options_source=s.options_source.replace(re.GLOBAL_PLACEHOLDER_REGEX,(e,l)=>r.valsByPrefId[l.toLowerCase()])),s}});var Ke=B((jn,Qe)=>{"use strict";function qr(r,s){function e(){this.constructor=r}e.prototype=s.prototype,r.prototype=new e}function D(r,s,e,l){this.message=r,this.expected=s,this.found=e,this.location=l,this.name="SyntaxError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,D)}qr(D,Error);D.buildMessage=function(r,s,e){var l={literal:function(C){return'"'+p(C.text)+'"'},class:function(C){var y=C.parts.map(function(A){return Array.isArray(A)?$(A[0])+"-"+$(A[1]):$(A)});return"["+(C.inverted?"^":"")+y+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(C){return C.description},not:function(C){return"not "+P(C.expected)}};function c(C){return C.charCodeAt(0).toString(16).toUpperCase()}function p(C){return C.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(y){return"\\x0"+c(y)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(y){return"\\x"+c(y)})}function $(C){return C.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(y){return"\\x0"+c(y)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(y){return"\\x"+c(y)})}function P(C){return l[C.type](C)}function F(C){var y=C.map(P),A,I;if(y.sort(),y.length>0){for(A=1,I=1;A<y.length;A++)y[A-1]!==y[A]&&(y[I]=y[A],I++);y.length=I}switch(y.length){case 1:return y[0];case 2:return y[0]+" or "+y[1];default:return y.slice(0,-1).join(", ")+", or "+y[y.length-1]}}function b(C){return C?'"'+p(C)+'"':"end of input"}return"Expected "+F(r)+" but "+b(s)+" found."};function Jr(r,s){s=s!==void 0?s:{};var e={},l={Top:Te},c=Te,p="/",$=".",P="#",F="=",b="(",C=")",y=",",A="[",I="]",Z="null",Ce="true",be="false",dt="{",gt="}",ht=":",vt="-",ce='"',Ee="\\",mt="n",yt="r",$t="t",Ct=/^[$@]/,W=/^[0-9]/,bt=/^[^\0-\x1F"\\]/,Pe=/^[a-zA-Z0-9_\-]/,Et=/^[ \n\t]/,Ae=O("/",!1),Pt=x("tag name"),At=x("class"),_t=x("id"),_e=O("=",!1),xt=O("(",!1),Ft=O(")",!1),Y=O(",",!1),Ot=x("variable"),wt=x("null"),Tt=x("boolean"),Vt=O("[",!1),It=O("]",!1),St=O("{",!1),Nt=O("}",!1),Rt=O(":",!1),Lt=x("number"),jt=x("string"),Bt=x("identifier"),Dt=x("whitespace"),Mt=function(t){return{type:"variable",meta:{variable:t}}},kt=function(t){return{type:"annotation",meta:{attributes:t}}},Gt=function(t,n){return n},Ht=function(t,n,a,o){n&&(a=a||[],a.unshift({type:"attribute",name:"primary",value:n}));let[f,u]=o?["tag",0]:["tag_open",1];return{type:f,nesting:u,meta:{tag:t,attributes:a}}},Xt=function(t){return{type:"tag_close",nesting:-1,meta:{tag:t}}},Ut=function(t,n){return t?[t,...n]:[]},xe=function(t){return t},qt=function(t){return t},Jt=function(t){return t},zt=function(t){return t},Zt=function(t){return{type:"class",name:t,value:!0}},Wt=function(t){return{type:"attribute",name:"id",value:t}},Yt=function(t,n){return{type:"attribute",name:t,value:n}},Qt=function(t,n,a){return n?[n,...a]:[]},Kt=function(t,n){let a={};for(let[o,{name:f,value:u}]of n.entries())a[f||o]=u;return new Rr(t,a)},Fe=function(t){return t},er=function(t,n){return{name:t,value:n}},ue=function(t){return t},tr=function(t,n,a){return t==="@"?[n,...a]:new Nr([n,...a])},rr=function(){return null},nr=function(){return!0},sr=function(){return!1},ir=function(t,n){return[t,...n]},ar=function(t){return t||[]},or=function(t,n){return Object.assign(t,...n)},lr=function(t){return t||{}},fr=function(t,n){return t==="$$mdtype"?{}:{[t]:n}},cr=function(){return parseFloat(vr())},ur=function(t){return t.join("")},pr=function(){return`
`},dr=function(){return"\r"},gr=function(){return"	"},hr=function(t){return t},i=0,g=0,Q=[{line:1,column:1}],j=[],d=0,K;if("startRule"in s){if(!(s.startRule in l))throw new Error(`Can't start parsing from rule "`+s.startRule+'".');c=l[s.startRule]}function vr(){return r.substring(g,i)}function _n(){return g}function xn(){return[g,i]}function Fn(){return U(g,i)}function On(t,n){throw n=n!==void 0?n:U(g,i),we([x(t)],r.substring(g,i),n)}function wn(t,n){throw n=n!==void 0?n:U(g,i),Cr(t,n)}function O(t,n){return{type:"literal",text:t,ignoreCase:n}}function Tn(t,n,a){return{type:"class",parts:t,inverted:n,ignoreCase:a}}function Vn(){return{type:"any"}}function mr(){return{type:"end"}}function x(t){return{type:"other",description:t}}function Oe(t){var n=Q[t],a;if(n)return n;for(a=t-1;!Q[a];)a--;for(n=Q[a],n={line:n.line,column:n.column};a<t;)r.charCodeAt(a)===10?(n.line++,n.column=1):n.column++,a++;return Q[t]=n,n}var yr=typeof s.filename=="string"&&s.filename.length>0;function U(t,n){var a={};yr&&(a.filename=s.filename);var o=Oe(t);a.start={offset:t,line:o.line,column:o.column};var f=Oe(n);return a.end={offset:n,line:f.line,column:f.column},a}function $r(){j.push({pos:i,variants:[]})}function m(t){var n=j[j.length-1];i<n.pos||(i>n.pos&&(n.pos=i,n.variants=[]),n.variants.push(t))}function In(t){var n=j.pop(),a=j[j.length-1],o=n.variants;a.pos===n.pos&&(t&&(o=o.map(function(f){return f.type==="not"?f.expected:{type:"not",expected:f}})),Array.prototype.push.apply(a.variants,o))}function Cr(t,n){return new D(t,null,null,n)}function we(t,n,a){return new D(D.buildMessage(t,n,a),t,n,a)}function br(){var t=j[0],n=t.pos;return we(t.variants,n<r.length?r.charAt(n):null,n<r.length?U(n,n+1):U(n,n))}function Te(){var t,n=function(a){d===0&&m(a)};return t=Er(),t===e&&(t=Pr(),t===e&&(t=Ar(),t===e&&(t=_r()))),t}function Er(){var t,n,a=function(o){d===0&&m(o)};return t=i,n=De(),n===e&&(n=Re()),n!==e&&(g=t,n=Mt(n)),t=n,t}function Pr(){var t,n,a,o,f=function(u){d===0&&m(u)};if(t=i,n=Ie(),n!==e){for(a=[],o=v();o!==e;)a.push(o),o=v();g=t,t=kt(n)}else i=t,t=e;return t}function Ar(){var t,n,a,o,f,u,h,_=function(w){d===0&&m(w)};if(t=i,n=Ve(),n!==e){for(a=[],o=v();o!==e;)a.push(o),o=v();for(o=i,f=k(),f!==e?(u=v(),u===e&&(u=null),g=o,o=Gt(n,f)):(i=o,o=e),o===e&&(o=null),f=Ie(),f===e&&(f=null),u=[],h=v();h!==e;)u.push(h),h=v();_(Ae),r.charCodeAt(i)===47?(h=p,i++):h=e,h===e&&(h=null),g=t,t=Ht(n,o,f,h)}else i=t,t=e;return t}function _r(){var t,n,a,o=function(f){d===0&&m(f)};return t=i,o(Ae),r.charCodeAt(i)===47?(n=p,i++):n=e,n!==e?(a=Ve(),a!==e?(g=t,t=Xt(a)):(i=t,t=e)):(i=t,t=e),t}function Ve(){var t,n=function(a){d===0&&m(a)};return n(Pt),d++,t=S(),d--,t}function Ie(){var t,n,a,o,f=function(u){d===0&&m(u)};if(t=i,n=Ne(),n!==e){for(a=[],o=Se();o!==e;)a.push(o),o=Se();g=t,t=Ut(n,a)}else i=t,t=e;return t}function Se(){var t,n,a,o=function(f){d===0&&m(f)};if(t=i,n=[],a=v(),a!==e)for(;a!==e;)n.push(a),a=v();else n=e;return n!==e?(a=Ne(),a!==e?(g=t,t=xe(a)):(i=t,t=e)):(i=t,t=e),t}function Ne(){var t,n,a=function(o){d===0&&m(o)};return t=i,n=Fr(),n!==e&&(g=t,n=qt(n)),t=n,t===e&&(t=i,n=xr(),n!==e&&(g=t,n=Jt(n)),t=n,t===e&&(t=i,n=Or(),n!==e&&(g=t,n=zt(n)),t=n)),t}function xr(){var t,n,a,o=function(f){d===0&&m(f)};return o(At),d++,t=i,r.charCodeAt(i)===46?(n=$,i++):n=e,n!==e?(a=S(),a!==e?(g=t,t=Zt(a)):(i=t,t=e)):(i=t,t=e),d--,t}function Fr(){var t,n,a,o=function(f){d===0&&m(f)};return o(_t),d++,t=i,r.charCodeAt(i)===35?(n=P,i++):n=e,n!==e?(a=S(),a!==e?(g=t,t=Wt(a)):(i=t,t=e)):(i=t,t=e),d--,t}function Or(){var t,n,a,o,f=function(u){d===0&&m(u)};return t=i,n=S(),n!==e?(f(_e),r.charCodeAt(i)===61?(a=F,i++):a=e,a!==e?(o=k(),o!==e?(g=t,t=Yt(n,o)):(i=t,t=e)):(i=t,t=e)):(i=t,t=e),t}function Re(){var t,n,a,o,f,u,h,_,w=function(Lr){d===0&&m(Lr)};if(t=i,n=S(),n!==e)if(w(xt),r.charCodeAt(i)===40?(a=b,i++):a=e,a!==e){for(o=[],f=v();f!==e;)o.push(f),f=v();for(f=i,u=Le(),u===e&&(u=null),h=[],_=je();_!==e;)h.push(_),_=je();g=f,f=Qt(n,u,h),w(Ft),r.charCodeAt(i)===41?(u=C,i++):u=e,u!==e?(g=t,t=Kt(n,f)):(i=t,t=e)}else i=t,t=e;else i=t,t=e;return t}function Le(){var t,n,a,o,f=function(u){d===0&&m(u)};return t=i,n=i,a=S(),a!==e?(f(_e),r.charCodeAt(i)===61?(o=F,i++):o=e,o!==e?(g=n,n=Fe(a)):(i=n,n=e)):(i=n,n=e),n===e&&(n=null),a=k(),a!==e?(g=t,t=er(n,a)):(i=t,t=e),t}function je(){var t,n,a,o,f,u=function(h){d===0&&m(h)};for(t=i,n=[],a=v();a!==e;)n.push(a),a=v();if(u(Y),r.charCodeAt(i)===44?(a=y,i++):a=e,a!==e){for(o=[],f=v();f!==e;)o.push(f),f=v();f=Le(),f!==e?(g=t,t=ue(f)):(i=t,t=e)}else i=t,t=e;return t}function Be(){var t,n,a,o=function(f){d===0&&m(f)};for(t=i,n=[],a=v();a!==e;)n.push(a),a=v();return o(Y),r.charCodeAt(i)===44?(a=y,i++):a=e,a!==e?(n=[n,a],t=n):(i=t,t=e),t===e&&(t=null),t}function De(){var t,n,a,o,f,u=function(h){d===0&&m(h)};if(u(Ot),d++,t=i,Ct.test(r.charAt(i))?(n=r.charAt(i),i++):n=e,n!==e)if(a=S(),a!==e){for(o=[],f=Me();f!==e;)o.push(f),f=Me();g=t,t=tr(n,a,o)}else i=t,t=e;else i=t,t=e;return d--,t}function Me(){var t,n,a,o,f=function(u){d===0&&m(u)};return t=i,r.charCodeAt(i)===46?(n=$,i++):n=e,n!==e?(a=S(),a!==e?(g=t,t=Fe(a)):(i=t,t=e)):(i=t,t=e),t===e&&(t=i,r.charCodeAt(i)===91?(n=A,i++):n=e,n!==e?(a=Xe(),a===e&&(a=pe()),a!==e?(r.charCodeAt(i)===93?(o=I,i++):o=e,o!==e?(g=t,t=ue(a)):(i=t,t=e)):(i=t,t=e)):(i=t,t=e)),t}function k(){var t,n=function(a){d===0&&m(a)};return t=wr(),t===e&&(t=Tr(),t===e&&(t=pe(),t===e&&(t=Xe(),t===e&&(t=Vr(),t===e&&(t=Ir(),t===e&&(t=Re(),t===e&&(t=De()))))))),t}function wr(){var t,n,a=function(o){d===0&&m(o)};return a(wt),d++,t=i,r.substr(i,4)===Z?(n=Z,i+=4):n=e,n!==e&&(g=t,n=rr()),t=n,d--,t}function Tr(){var t,n,a=function(o){d===0&&m(o)};return a(Tt),d++,t=i,r.substr(i,4)===Ce?(n=Ce,i+=4):n=e,n!==e&&(g=t,n=nr()),t=n,t===e&&(t=i,r.substr(i,5)===be?(n=be,i+=5):n=e,n!==e&&(g=t,n=sr()),t=n),d--,t}function Vr(){var t,n,a,o,f,u,h,_=function(w){d===0&&m(w)};if(t=i,_(Vt),r.charCodeAt(i)===91?(n=A,i++):n=e,n!==e){for(a=[],o=v();o!==e;)a.push(o),o=v();if(o=i,f=k(),f!==e){for(u=[],h=ke();h!==e;)u.push(h),h=ke();h=Be(),g=o,o=ir(f,u)}else i=o,o=e;for(o===e&&(o=null),f=[],u=v();u!==e;)f.push(u),u=v();_(It),r.charCodeAt(i)===93?(u=I,i++):u=e,u!==e?(g=t,t=ar(o)):(i=t,t=e)}else i=t,t=e;return t}function ke(){var t,n,a,o,f,u=function(h){d===0&&m(h)};for(t=i,n=[],a=v();a!==e;)n.push(a),a=v();if(u(Y),r.charCodeAt(i)===44?(a=y,i++):a=e,a!==e){for(o=[],f=v();f!==e;)o.push(f),f=v();f=k(),f!==e?(g=t,t=ue(f)):(i=t,t=e)}else i=t,t=e;return t}function Ir(){var t,n,a,o,f,u,h,_=function(w){d===0&&m(w)};if(t=i,_(St),r.charCodeAt(i)===123?(n=dt,i++):n=e,n!==e){for(a=[],o=v();o!==e;)a.push(o),o=v();if(o=i,f=He(),f!==e){for(u=[],h=Ge();h!==e;)u.push(h),h=Ge();h=Be(),g=o,o=or(f,u)}else i=o,o=e;for(o===e&&(o=null),f=[],u=v();u!==e;)f.push(u),u=v();_(Nt),r.charCodeAt(i)===125?(u=gt,i++):u=e,u!==e?(g=t,t=lr(o)):(i=t,t=e)}else i=t,t=e;return t}function Ge(){var t,n,a,o,f,u=function(h){d===0&&m(h)};for(t=i,n=[],a=v();a!==e;)n.push(a),a=v();if(u(Y),r.charCodeAt(i)===44?(a=y,i++):a=e,a!==e){for(o=[],f=v();f!==e;)o.push(f),f=v();f=He(),f!==e?(g=t,t=xe(f)):(i=t,t=e)}else i=t,t=e;return t}function He(){var t,n,a,o,f,u=function(h){d===0&&m(h)};if(t=i,n=S(),n===e&&(n=pe()),n!==e)if(u(Rt),r.charCodeAt(i)===58?(a=ht,i++):a=e,a!==e){for(o=[],f=v();f!==e;)o.push(f),f=v();f=k(),f!==e?(g=t,t=fr(n,f)):(i=t,t=e)}else i=t,t=e;else i=t,t=e;return t}function Xe(){var t,n,a,o,f,u,h,_=function(w){d===0&&m(w)};if(_(Lt),d++,t=i,r.charCodeAt(i)===45?(n=vt,i++):n=e,n===e&&(n=null),a=[],W.test(r.charAt(i))?(o=r.charAt(i),i++):o=e,o!==e)for(;o!==e;)a.push(o),W.test(r.charAt(i))?(o=r.charAt(i),i++):o=e;else a=e;if(a!==e){if(o=i,r.charCodeAt(i)===46?(f=$,i++):f=e,f!==e){if(u=[],W.test(r.charAt(i))?(h=r.charAt(i),i++):h=e,h!==e)for(;h!==e;)u.push(h),W.test(r.charAt(i))?(h=r.charAt(i),i++):h=e;else u=e;u!==e?(f=[f,u],o=f):(i=o,o=e)}else i=o,o=e;o===e&&(o=null),g=t,t=cr()}else i=t,t=e;return d--,t}function pe(){var t,n,a,o,f=function(u){d===0&&m(u)};if(f(jt),d++,t=i,r.charCodeAt(i)===34?(n=ce,i++):n=e,n!==e){for(a=[],o=Ue();o!==e;)a.push(o),o=Ue();r.charCodeAt(i)===34?(o=ce,i++):o=e,o!==e?(g=t,t=ur(a)):(i=t,t=e)}else i=t,t=e;return d--,t}function Ue(){var t,n=function(a){d===0&&m(a)};return bt.test(r.charAt(i))?(t=r.charAt(i),i++):t=e,t===e&&(t=Sr()),t}function Sr(){var t,n,a,o,f=function(u){d===0&&m(u)};return t=i,r.charCodeAt(i)===92?(n=Ee,i++):n=e,n!==e?(r.charCodeAt(i)===34?(a=ce,i++):a=e,a===e&&(r.charCodeAt(i)===92?(a=Ee,i++):a=e,a===e&&(a=i,r.charCodeAt(i)===110?(o=mt,i++):o=e,o!==e&&(g=a,o=pr()),a=o,a===e&&(a=i,r.charCodeAt(i)===114?(o=yt,i++):o=e,o!==e&&(g=a,o=dr()),a=o,a===e&&(a=i,r.charCodeAt(i)===116?(o=$t,i++):o=e,o!==e&&(g=a,o=gr()),a=o)))),a!==e?(g=t,t=hr(a)):(i=t,t=e)):(i=t,t=e),t}function S(){var t,n,a,o=function(f){d===0&&m(f)};if(o(Bt),d++,t=i,n=[],Pe.test(r.charAt(i))?(a=r.charAt(i),i++):a=e,a!==e)for(;a!==e;)n.push(a),Pe.test(r.charAt(i))?(a=r.charAt(i),i++):a=e;else n=e;return n!==e?t=r.substring(t,i):t=n,d--,t}function v(){var t,n=function(a){d===0&&m(a)};return n(Dt),d++,Et.test(r.charAt(i))?(t=r.charAt(i),i++):t=e,d--,t}let{Variable:Nr,Function:Rr}=s;if($r(),K=c(),K!==e&&i===r.length)return K;throw K!==e&&i<r.length&&m(mr()),br()}Qe.exports={SyntaxError:D,parse:Jr}});var q,et=G(()=>{"use strict";q=class{constructor(s=[]){this.$$mdtype="Variable";this.path=s}resolve({variables:s}={}){if(s instanceof Function)return s(this.path);let e=this.path.reduce((l={},c)=>l[c],s);return{$$mdtype:"Variable",path:this.path,value:e}}}});function zr(r){return!!r?.$$mdtype}function ne(r,s={}){if(r==null||typeof r!="object")return r;if(Array.isArray(r))return r.map(l=>ne(l,s));if(zr(r)&&r?.resolve instanceof Function)return r.resolve(s);if(Object.getPrototypeOf(r)!==Object.prototype)return r;let e={};for(let[l,c]of Object.entries(r))e[l]=ne(c,s);return e}var tt=G(()=>{"use strict"});var J,rt=G(()=>{"use strict";tt();J=class{constructor(s,e){this.$$mdtype="Function";this.name=s,this.parameters=e}resolve(s={}){let e=s?.functions?.[this.name];if(!e)return null;let l=ne(this.parameters,s);return e.transform?.(l,s)}}});var it={};de(it,{CLOSE:()=>ie,IDENTIFIER_REGEX:()=>nt,OPEN:()=>se,buildTag:()=>Qr,findTagEnd:()=>st,isClientFunction:()=>tn,isClientVariable:()=>en,isIdentifier:()=>Zr,isPromise:()=>he,isTag:()=>Kr,parseTags:()=>Yr});function Zr(r){return typeof r=="string"&&nt.test(r)}function he(r){return r&&typeof r=="object"&&typeof r.then=="function"}function st(r,s=0){let e=0;for(let l=s;l<r.length;l++){let c=r[l];switch(e){case 1:switch(c){case'"':e=0;break;case"\\":e=2;break}break;case 2:e=1;break;case 0:if(c==='"')e=1;else if(r.startsWith(ie,l))return l}}return null}function Wr(r,s,e){try{return(0,ae.parse)(r,{Variable:q,Function:J})}catch(l){if(!(l instanceof ae.SyntaxError))throw l;let{message:c,location:{start:p,end:$}}=l,P={start:{line:s,character:p.offset+e},end:{line:s+1,character:$.offset+e}};return{type:"error",meta:{error:{message:c,location:P}}}}}function Yr(r,s=0){let e=s+1,l=[],c=0;for(let p=0;p<r.length;p++){if(r[p]===`
`){e++;continue}if(!r.startsWith(se,p))continue;let $=st(r,p);if($==null){p=p+se.length;continue}let P=r.slice(p,$+ie.length),F=r.slice(p+se.length,$),b=r.lastIndexOf(`
`,p),C=r.indexOf(`
`,$),y=r.slice(b,C),A=Wr(F.trim(),e,p-b),I=y.trim()===P?b:p,Z=r.slice(c,I);l.push({type:"text",start:c,end:p-1,content:Z}),l.push({map:[e,e+1],position:{start:p-b,end:p-b+P.length},start:p,end:p+P.length-1,info:P,...A}),c=$+ie.length,p=c-1}return l.push({type:"text",start:c,end:r.length-1,content:r.slice(c)}),l}function Qr(r="div",s={},e=[]){return{$$mdtype:"Tag",name:r,attributes:s,children:e}}function Kr(r){return r?.$$mdtype==="Tag"}function en(r){return r?.$$mdtype==="Variable"}function tn(r){return r?.$$mdtype==="Function"}var ae,se,ie,nt,ve=G(()=>{"use strict";ae=Gr(Ke());et();rt();se="{%",ie="%}",nt=/^[a-zA-Z0-9_-]+$/});var at={};de(at,{tagElse:()=>nn,tagIf:()=>rn,truthy:()=>M});function M(r){return typeof r=="object"&&"value"in r?r.value!==!1&&r.value!==void 0&&r.value!==null:r!==!1&&r!==void 0&&r!==null}var rn,nn,me=G(()=>{"use strict";ve();rn={attributes:{primary:{type:Object,render:!0}},transform(r,s){let e=c=>({$$mdtype:"Tag",name:r.attributes.inline?"span":"div",if:r.attributes.primary,attributes:{display:M(r.attributes.primary)?"true":"false"},children:c}),l=r.children.flatMap(c=>c.transform(s));return l.some(he)?Promise.all(l).then(c=>[e(c.flat())]):[e(l)]}},nn={selfClosing:!0,attributes:{primary:{type:Object,render:!1}}}});var ot={};de(ot,{default:()=>un});var X,sn,an,on,ln,fn,cn,un,lt=G(()=>{"use strict";me();X=class r{static{this.ref=0}static generateRef(){return`${r.ref++}`}},sn={transform(r){return{$$mdtype:"Function",name:"and",value:Object.values(r).every(e=>typeof e=="object"?M(e.value):M(e)),parameters:r,ref:X.generateRef()}}},an={transform(r){return{$$mdtype:"Function",name:"or",value:Object.values(r).find(e=>M(e.value))!==void 0,parameters:r,ref:X.generateRef()}}},on={parameters:{0:{required:!0}},transform(r){return{$$mdtype:"Function",name:"not",value:!M(r[0].value),parameters:r,ref:X.generateRef()}}},ln={transform(r){let s=Object.values(r).map(l=>typeof l=="object"?l.value:l);return{$$mdtype:"Function",name:"equals",value:s.every(l=>l===s[0]),parameters:r,ref:X.generateRef()}}},fn={transform(r){return typeof r[0]=="object"?JSON.stringify(r[0].value,null,2):JSON.stringify(r[0],null,2)}},cn={transform(r){let s;return Object.values(r).forEach(e=>{s===void 0&&(typeof e=="object"?s=e.value:s=e)}),{$$mdtype:"Function",name:"default",value:s,parameters:r}}},un={and:sn,or:an,not:on,equals:ln,default:cn,debug:fn}});var ct=B(R=>{"use strict";var pn=R&&R.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(R,"__esModule",{value:!0});R.reresolve=ye;R.reresolveIfNode=ft;R.reresolveFunctionNode=oe;R.reresolveVariableNode=le;var dn=pn((lt(),ge(ot))),gn=(me(),ge(at)),N=(ve(),ge(it));function ye(r,s){if(!s)throw new Error("Config is required to refresh client renderable tree nodes.");if(r===null||typeof r!="object")return r;if(Array.isArray(r)){for(let e of r)"$$mdtype"in e&&ye(e,s);return r}return(0,N.isClientVariable)(r)?(r=le(r,s),r):(0,N.isClientFunction)(r)?(r=oe(r,s),r):(0,N.isTag)(r)?(r.children=r.children.map(e=>(0,N.isTag)(e)||(0,N.isClientVariable)(e)||(0,N.isClientFunction)(e)?ye(e,s):e),"if"in r&&(r=ft(r,s)),r):r}function ft(r,s){let e=r.if;return(0,N.isClientVariable)(e)?e=le(e,s):(0,N.isClientFunction)(e)&&(e=oe(e,s)),(0,gn.truthy)(e)?r.attributes.display="true":r.attributes.display="false",r}function oe(r,s){for(let[c,p]of Object.entries(r.parameters))p.$$mdtype==="Variable"?r.parameters[c]=le(p,s):p.$$mdtype==="Function"&&(r.parameters[c]=oe(p,s));let e=dn.default[r.name];if(!e)throw new Error(`Unknown function: ${r.name}`);if(!e.transform)throw new Error(`Function ${r.name} has no transform method`);let l=e.transform(r.parameters,s).value;return r.value=l,r}function le(r,s){if(s.variables===void 0)return{$$mdtype:"Variable",path:r.path,value:void 0};if(s.variables instanceof Function)return{$$mdtype:"Variable",path:r.path,value:s.variables(r.path)};let e;for(let l of r.path)e=e?e[l]:s.variables[l];return r.value=e,r}});var ut=B(E=>{"use strict";Object.defineProperty(E,"__esModule",{value:!0});E.expandClientFunction=E.minifyClientFunction=E.minifyClientVariable=E.expandClientVariable=E.CLIENT_FUNCTION_MINIFY_MAP=E.CLIENT_FUNCTION_EXPAND_MAP=void 0;E.CLIENT_FUNCTION_EXPAND_MAP={F:"Function",a:"and",o:"or",e:"equals",n:"not",def:"default",deb:"debug"};E.CLIENT_FUNCTION_MINIFY_MAP={Function:"F",and:"a",or:"o",equals:"e",not:"n",default:"def",debug:"deb"};var hn=r=>{let s=JSON.parse(JSON.stringify(r));return{$$mdtype:"Variable",path:s.p,value:s.v}};E.expandClientVariable=hn;var vn=r=>{let s=JSON.parse(JSON.stringify(r));return{m:"V",p:s.path,v:s.value}};E.minifyClientVariable=vn;var mn=r=>{let s=JSON.parse(JSON.stringify(r));return Object.keys(s.parameters).forEach(e=>{let l=s.parameters[e];typeof l=="object"&&"$$mdtype"in l&&l.$$mdtype==="Function"?s.parameters[e]=(0,E.minifyClientFunction)(l):typeof l=="object"&&"$$mdtype"in l&&l.$$mdtype==="Variable"&&(s.parameters[e]=(0,E.minifyClientVariable)(l))}),{m:E.CLIENT_FUNCTION_MINIFY_MAP[s.$$mdtype],n:E.CLIENT_FUNCTION_MINIFY_MAP[s.name],p:s.parameters,v:s.value,r:s.ref}};E.minifyClientFunction=mn;var yn=r=>{let s=JSON.parse(JSON.stringify(r));return Object.keys(s.p).forEach(e=>{let l=s.p[e];typeof l=="object"&&"m"in l&&l.m==="F"?s.p[e]=(0,E.expandClientFunction)(l):typeof l=="object"&&"m"in l&&l.m==="V"&&(s.p[e]=(0,E.expandClientVariable)(l))}),{$$mdtype:E.CLIENT_FUNCTION_EXPAND_MAP[s.m],name:E.CLIENT_FUNCTION_EXPAND_MAP[s.n],parameters:s.p,value:s.v,ref:s.r}};E.expandClientFunction=yn});var pt=B(L=>{"use strict";var $e=L&&L.__classPrivateFieldGet||function(r,s,e,l){if(e==="a"&&!l)throw new TypeError("Private accessor was defined without a getter");if(typeof s=="function"?r!==s||!l:!s.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e==="m"?l:e==="a"?l.call(r):l?l.value:s.get(r)},$n=L&&L.__classPrivateFieldSet||function(r,s,e,l,c){if(l==="m")throw new TypeError("Private method is not writable");if(l==="a"&&!c)throw new TypeError("Private accessor was defined without a setter");if(typeof s=="function"?r!==s||!c:!s.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return l==="a"?c.call(r,e):c?c.value=e:s.set(r,e),e},V,z;Object.defineProperty(L,"__esModule",{value:!0});L.ClientRenderer=void 0;var Cn=Je(),bn=Ye(),En=ct(),Pn=ut(),fe=class{constructor(){this.selectedValsByPrefId={},this.ifFunctionsByRef={},this.storedPreferences={}}static get instance(){return $e(V,V,"f",z)||($n(V,V,new V,"f",z),$e(V,V,"f",z).retrieveStoredPreferences()),$e(V,V,"f",z)}retrieveStoredPreferences(){let s=JSON.parse(localStorage.getItem("content-prefs")||"{}");this.storedPreferences=s}updateStoredPreferences(){let s=JSON.parse(localStorage.getItem("content-prefs")||"{}"),e=Object.assign(Object.assign({},s),this.selectedValsByPrefId);this.storedPreferences=e,localStorage.setItem("content-prefs",JSON.stringify(e))}getSelectedValsFromUrl(){let e=new URL(window.location.href).searchParams,l={};return e.forEach((c,p)=>{p in Object.keys(this.selectedValsByPrefId)&&(l[p]=c)}),l}syncUrlWithSelectedVals(){let s=new URL(window.location.href),e=s.searchParams;Object.keys(this.selectedValsByPrefId).sort().forEach(c=>{e.set(c,this.selectedValsByPrefId[c])}),window.history.replaceState({},"",s.toString())}handlePrefSelectionChange(s){let e=s.target;if(!(e instanceof Element))return;let l=e.getAttribute("data-pref-id");if(!l)return;let c=e.getAttribute("data-option-id");c&&(this.selectedValsByPrefId[l]=c,this.rerenderChooser(),this.rerenderPageContent(),this.populateRightNav(),this.syncUrlWithSelectedVals(),this.updateStoredPreferences())}elementIsHidden(s){let e=s;for(;e;){if(e.classList.contains("markdoc__hidden"))return!0;e=e.parentElement}}populateRightNav(){let s="<ul>",e=Array.from(document.querySelectorAll("#mainContent h2, #mainContent h3, #mainContent h4, #mainContent h5, #mainContent h6")),l=2;e.forEach(p=>{if(this.elementIsHidden(p))return;let $=parseInt(p.tagName[1]);$>l?s+="<ul>":$<l&&(s+="</ul>"),l=$,s+=`<li><a href="#${p.id}">${p.textContent}</a></li>`}),s+="</ul>";let c=document.getElementById("TableOfContents");if(!c)throw new Error('Cannot find right nav element with id "TableOfContents"');c.innerHTML=s}rerender(){this.rerenderChooser(),this.rerenderPageContent()}rerenderPageContent(){let s={};Object.keys(this.ifFunctionsByRef).forEach(l=>{let c=this.ifFunctionsByRef[l],p=c.value,$=(0,En.reresolveFunctionNode)(c,{variables:this.selectedValsByPrefId});this.ifFunctionsByRef[l]=$,p!==$.value&&(s[l]=$.value)});let e=document.getElementsByClassName("markdoc__toggleable");for(let l=0;l<e.length;l++){let c=e[l],p=c.getAttribute("data-if");if(!p)throw new Error("No ref found on toggleable element");s[p]!==void 0&&(s[p]?c.classList.remove("markdoc__hidden"):c.classList.add("markdoc__hidden"))}}addChooserEventListeners(){let s=document.getElementsByClassName("markdoc-pref__pill");for(let e=0;e<s.length;e++)s[e].addEventListener("click",l=>this.handlePrefSelectionChange(l))}locateChooserElement(){let s=document.getElementById("markdoc-chooser");if(s)this.chooserElement=s;else throw new Error('Cannot find chooser element with id "markdoc-chooser"')}applyPrefOverrides(){let s=Object.keys(this.selectedValsByPrefId),e=!1;Object.keys(this.storedPreferences).forEach(c=>{s.includes(c)&&this.selectedValsByPrefId[c]!==this.storedPreferences[c]&&(this.selectedValsByPrefId[c]=this.storedPreferences[c],e=!0)});let l=this.getSelectedValsFromUrl();return Object.keys(l).forEach(c=>{s.includes(c)&&this.selectedValsByPrefId[c]!==l[c]&&(this.selectedValsByPrefId[c]=l[c],e=!0)}),e}initialize(s){this.prefOptionsConfig=s.prefOptionsConfig,this.pagePrefsConfig=s.pagePrefsConfig,this.selectedValsByPrefId=s.selectedValsByPrefId||{},this.ifFunctionsByRef={},Object.keys(s.ifFunctionsByRef).forEach(l=>{this.ifFunctionsByRef[l]=(0,Pn.expandClientFunction)(s.ifFunctionsByRef[l])}),this.locateChooserElement(),this.applyPrefOverrides()?this.rerender():this.addChooserEventListeners(),this.revealPage(),document.addEventListener("DOMContentLoaded",()=>{this.populateRightNav()}),this.syncUrlWithSelectedVals(),this.updateStoredPreferences()}revealPage(){this.chooserElement&&(this.chooserElement.style.visibility="visible");let s=document.getElementById("markdoc-content");s&&(s.style.visibility="visible")}rerenderChooser(){if(!this.pagePrefsConfig||!this.prefOptionsConfig||!this.chooserElement)throw new Error("Cannot rerender chooser without pagePrefsConfig, prefOptionsConfig, and chooserElement");let s=(0,bn.resolveMinifiedPagePrefs)({pagePrefsConfig:this.pagePrefsConfig,prefOptionsConfig:this.prefOptionsConfig,valsByPrefId:this.selectedValsByPrefId});Object.keys(s).forEach(l=>{let c=s[l];this.selectedValsByPrefId[c.id]=c.currentValue});let e=(0,Cn.getChooserHtml)(s);this.chooserElement.innerHTML=e,this.addChooserEventListeners()}};L.ClientRenderer=fe;V=fe;z={value:void 0}});var An=pt().ClientRenderer;window.clientRenderer=An.instance;})();
